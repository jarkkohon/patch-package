"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var chalk_1 = require("chalk");
var child_process_1 = require("child_process");
var fs = require("fs");
var path = require("path");
var rimraf = require("rimraf");
var shellEscape = require("shell-escape");
var tmp = require("tmp");
function makePatch(packageName, appPath) {
    var nodeModulesPath = path.join(appPath, "node_modules");
    var packagePath = path.join(nodeModulesPath, packageName);
    var packageJsonPath = path.join(packagePath, "package.json");
    if (!fs.existsSync(packageJsonPath)) {
        throw new Error("Unable to find local " + packageName + " package.json at " + packageJsonPath);
    }
    var packageVersion = require(packageJsonPath).version;
    var tmpRepo = tmp.dirSync({ unsafeCleanup: true });
    var tmpNodeModulesBackup = tmp.dirSync();
    try {
        var patchesDir_1 = path.join(appPath, "patches");
        if (!fs.existsSync(patchesDir_1)) {
            fs.mkdirSync(patchesDir_1);
        }
        else {
            // remove exsiting patch for this package, if any
            fs.readdirSync(patchesDir_1).forEach(function (fileName) {
                if (fileName.startsWith(packageName + ":")) {
                    console.log("removing", path.join(patchesDir_1, fileName));
                    fs.unlinkSync(path.join(patchesDir_1, fileName));
                }
            });
        }
        // back up the user's node_modules
        child_process_1.execSync(shellEscape(["mv", path.join(appPath, "node_modules"), path.join(tmpNodeModulesBackup.name, "node_modules")]));
        // reinstall the user's node_modules without the changes for this package
        child_process_1.execSync("yarn");
        // move the clean package to the tmp repo
        var tmpPackagePath = path.join(tmpRepo.name, "node_modules", packageName);
        fs.mkdirSync(path.join(tmpRepo.name, "node_modules"));
        child_process_1.execSync(shellEscape(["mv", packagePath, tmpPackagePath]));
        // commit it
        fs.writeFileSync(path.join(tmpRepo.name, ".gitignore"), "!/node_modules\n");
        var tmpExec = function (cmd) { return child_process_1.execSync(cmd, { cwd: tmpRepo.name }); };
        tmpExec("git init");
        tmpExec(shellEscape(["git", "add", "-f", path.join("node_modules", packageName)]));
        tmpExec("git commit -m init");
        // replace package with user's version
        rimraf.sync(tmpPackagePath);
        // copy user's custom version to temp repo
        tmpExec(shellEscape([
            "cp",
            "-R",
            path.join(tmpNodeModulesBackup.name, "node_modules", packageName),
            tmpPackagePath,
        ]));
        // add their files to the index
        tmpExec(shellEscape(["git", "add", "-f", path.join("node_modules", packageName)]));
        // get diff of changes
        var patch = tmpExec("git diff HEAD").toString();
        if (patch.trim() === "") {
            console.warn("\u2049\uFE0F  Not creating patch file for package '" + packageName + "'");
            console.warn("\u2049\uFE0F  There don't appear to be any changes.");
        }
        else {
            var patchFileName = packageName + ":" + packageVersion + ".patch";
            fs.writeFileSync(path.join(patchesDir_1, patchFileName), patch);
            console.log("Created file patches/" + patchFileName + " " + chalk_1.green("âœ”"));
        }
    }
    catch (e) {
        console.error(e);
        throw e;
    }
    finally {
        tmpRepo.removeCallback();
        rimraf.sync(nodeModulesPath);
        fs.renameSync(path.join(tmpNodeModulesBackup.name, "node_modules"), nodeModulesPath);
        tmpNodeModulesBackup.removeCallback();
    }
}
exports.default = makePatch;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFrZVBhdGNoLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL21ha2VQYXRjaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtCQUE2QjtBQUM3QiwrQ0FBZ0Q7QUFDaEQsdUJBQXdCO0FBQ3hCLDJCQUE0QjtBQUM1QiwrQkFBZ0M7QUFDaEMsMENBQTJDO0FBQzNDLHlCQUEwQjtBQUUxQixtQkFBa0MsV0FBbUIsRUFBRSxPQUFlO0lBQ3BFLElBQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGNBQWMsQ0FBQyxDQUFBO0lBQzFELElBQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLFdBQVcsQ0FBQyxDQUFBO0lBQzNELElBQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxDQUFBO0lBQzlELEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEMsTUFBTSxJQUFJLEtBQUssQ0FBQywwQkFBd0IsV0FBVyx5QkFBb0IsZUFBaUIsQ0FBQyxDQUFBO0lBQzNGLENBQUM7SUFFRCxJQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsT0FBTyxDQUFBO0lBRXZELElBQU0sT0FBTyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtJQUNwRCxJQUFNLG9CQUFvQixHQUFHLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUUxQyxJQUFJLENBQUM7UUFDSCxJQUFNLFlBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsQ0FBQTtRQUVoRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsWUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFD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QztZQUN4QixPQUFPLENBQUMsSUFBSSxDQUFDLHdEQUE0QyxXQUFXLE1BQUcsQ0FBQyxDQUFBO1lBQ3hFLE9BQU8sQ0FBQyxJQUFJLENBQUMscURBQTJDLENBQUMsQ0FBQTtRQUMzRCxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixJQUFNLGFBQWEsR0FBTSxXQUFXLFNBQUksY0FBYyxXQUFRLENBQUE7WUFDOUQsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVUsRUFBRSxhQUFhLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQTtZQUM3RCxPQUFPLENBQUMsR0FBRyxDQUFDLDBCQUF3QixhQUFhLFNBQUksYUFBSyxDQUFDLEdBQUcsQ0FBRyxDQUFDLENBQUE7UUFDcEUsQ0FBQztJQUNILENBQUM7SUFBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ1gsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNoQixNQUFNLENBQUMsQ0FBQTtJQUNULENBQUM7WUFBUyxDQUFDO1FBQ1QsT0FBTyxDQUFDLGNBQWMsRUFBRSxDQUFBO1FBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUE7UUFDNUIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksRUFBRSxjQUFjLENBQUMsRUFBRSxlQUFlLENBQUMsQ0FBQTtRQUNwRixvQkFBb0IsQ0FBQyxjQUFjLEVBQUUsQ0FBQTtJQUN2QyxDQUFDO0FBQ0gsQ0FBQztBQWxGRCw0QkFrRkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBncmVlbiB9IGZyb20gXCJjaGFsa1wiXG5pbXBvcnQgeyBleGVjU3luYyBhcyBleGVjIH0gZnJvbSBcImNoaWxkX3Byb2Nlc3NcIlxuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzXCJcbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIlxuaW1wb3J0ICogYXMgcmltcmFmIGZyb20gXCJyaW1yYWZcIlxuaW1wb3J0ICogYXMgc2hlbGxFc2NhcGUgZnJvbSBcInNoZWxsLWVzY2FwZVwiXG5pbXBvcnQgKiBhcyB0bXAgZnJvbSBcInRtcFwiXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1ha2VQYXRjaChwYWNrYWdlTmFtZTogc3RyaW5nLCBhcHBQYXRoOiBzdHJpbmcpIHtcbiAgY29uc3Qgbm9kZU1vZHVsZXNQYXRoID0gcGF0aC5qb2luKGFwcFBhdGgsIFwibm9kZV9tb2R1bGVzXCIpXG4gIGNvbnN0IHBhY2thZ2VQYXRoID0gcGF0aC5qb2luKG5vZGVNb2R1bGVzUGF0aCwgcGFja2FnZU5hbWUpXG4gIGNvbnN0IHBhY2thZ2VKc29uUGF0aCA9IHBhdGguam9pbihwYWNrYWdlUGF0aCwgXCJwYWNrYWdlLmpzb25cIilcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhY2thZ2VKc29uUGF0aCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBmaW5kIGxvY2FsICR7cGFja2FnZU5hbWV9IHBhY2thZ2UuanNvbiBhdCAke3BhY2thZ2VKc29uUGF0aH1gKVxuICB9XG5cbiAgY29uc3QgcGFja2FnZVZlcnNpb24gPSByZXF1aXJlKHBhY2thZ2VKc29uUGF0aCkudmVyc2lvblxuXG4gIGNvbnN0IHRtcFJlcG8gPSB0bXAuZGlyU3luYyh7IHVuc2FmZUNsZWFudXA6IHRydWUgfSlcbiAgY29uc3QgdG1wTm9kZU1vZHVsZXNCYWNrdXAgPSB0bXAuZGlyU3luYygpXG5cbiAgdHJ5IHtcbiAgICBjb25zdCBwYXRjaGVzRGlyID0gcGF0aC5qb2luKGFwcFBhdGgsIFwicGF0Y2hlc1wiKVxuXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGNoZXNEaXIpKSB7XG4gICAgICBmcy5ta2RpclN5bmMocGF0Y2hlc0RpcilcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmVtb3ZlIGV4c2l0aW5nIHBhdGNoIGZvciB0aGlzIHBhY2thZ2UsIGlmIGFueVxuICAgICAgZnMucmVhZGRpclN5bmMocGF0Y2hlc0RpcikuZm9yRWFjaCgoZmlsZU5hbWUpID0+IHtcbiAgICAgICAgaWYgKGZpbGVOYW1lLnN0YXJ0c1dpdGgocGFja2FnZU5hbWUgKyBcIjpcIikpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInJlbW92aW5nXCIsIHBhdGguam9pbihwYXRjaGVzRGlyLCBmaWxlTmFtZSkpXG4gICAgICAgICAgZnMudW5saW5rU3luYyhwYXRoLmpvaW4ocGF0Y2hlc0RpciwgZmlsZU5hbWUpKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIGJhY2sgdXAgdGhlIHVzZXIncyBub2RlX21vZHVsZXNcbiAgICBleGVjKHNoZWxsRXNjYXBlKFtcIm12XCIsIHBhdGguam9pbihhcHBQYXRoLCBcIm5vZGVfbW9kdWxlc1wiKSwgcGF0aC5qb2luKHRtcE5vZGVNb2R1bGVzQmFja3VwLm5hbWUsIFwibm9kZV9tb2R1bGVzXCIpXSkpXG5cbiAgICAvLyByZWluc3RhbGwgdGhlIHVzZXIncyBub2RlX21vZHVsZXMgd2l0aG91dCB0aGUgY2hhbmdlcyBmb3IgdGhpcyBwYWNrYWdlXG4gICAgZXhlYyhcInlhcm5cIilcblxuICAgIC8vIG1vdmUgdGhlIGNsZWFuIHBhY2thZ2UgdG8gdGhlIHRtcCByZXBvXG4gICAgY29uc3QgdG1wUGFja2FnZVBhdGggPSBwYXRoLmpvaW4odG1wUmVwby5uYW1lLCBcIm5vZGVfbW9kdWxlc1wiLCBwYWNrYWdlTmFtZSlcbiAgICBmcy5ta2RpclN5bmMocGF0aC5qb2luKHRtcFJlcG8ubmFtZSwgXCJub2RlX21vZHVsZXNcIikpXG4gICAgZXhlYyhzaGVsbEVzY2FwZShbXCJtdlwiLCBwYWNrYWdlUGF0aCwgdG1wUGFja2FnZVBhdGhdKSlcblxuICAgIC8vIGNvbW1pdCBpdFxuICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKHRtcFJlcG8ubmFtZSwgXCIuZ2l0aWdub3JlXCIpLCBcIiEvbm9kZV9tb2R1bGVzXFxuXCIpXG4gICAgY29uc3QgdG1wRXhlYyA9IChjbWQ6IHN0cmluZykgPT4gZXhlYyhjbWQsIHsgY3dkOiB0bXBSZXBvLm5hbWUgfSlcbiAgICB0bXBFeGVjKGBnaXQgaW5pdGApXG4gICAgdG1wRXhlYyhzaGVsbEVzY2FwZShbXCJnaXRcIiwgXCJhZGRcIiwgXCItZlwiLCBwYXRoLmpvaW4oXCJub2RlX21vZHVsZXNcIiwgcGFja2FnZU5hbWUpXSkpXG4gICAgdG1wRXhlYyhgZ2l0IGNvbW1pdCAtbSBpbml0YClcblxuICAgIC8vIHJlcGxhY2UgcGFja2FnZSB3aXRoIHVzZXIncyB2ZXJzaW9uXG4gICAgcmltcmFmLnN5bmModG1wUGFja2FnZVBhdGgpXG5cbiAgICAvLyBjb3B5IHVzZXIncyBjdXN0b20gdmVyc2lvbiB0byB0ZW1wIHJlcG9cbiAgICB0bXBFeGVjKFxuICAgICAgc2hlbGxFc2NhcGUoXG4gICAgICAgIFtcbiAgICAgICAgICBcImNwXCIsXG4gICAgICAgICAgXCItUlwiLFxuICAgICAgICAgIHBhdGguam9pbih0bXBOb2RlTW9kdWxlc0JhY2t1cC5uYW1lLCBcIm5vZGVfbW9kdWxlc1wiLCBwYWNrYWdlTmFtZSksXG4gICAgICAgICAgdG1wUGFja2FnZVBhdGgsXG4gICAgICAgIF0sXG4gICAgICApLFxuICAgIClcbiAgICAvLyBhZGQgdGhlaXIgZmlsZXMgdG8gdGhlIGluZGV4XG4gICAgdG1wRXhlYyhzaGVsbEVzY2FwZShbXCJnaXRcIiwgXCJhZGRcIiwgXCItZlwiLCBwYXRoLmpvaW4oXCJub2RlX21vZHVsZXNcIiwgcGFja2FnZU5hbWUpXSkpXG4gICAgLy8gZ2V0IGRpZmYgb2YgY2hhbmdlc1xuICAgIGNvbnN0IHBhdGNoID0gdG1wRXhlYyhgZ2l0IGRpZmYgSEVBRGApLnRvU3RyaW5nKClcblxuICAgIGlmIChwYXRjaC50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgIGNvbnNvbGUud2Fybihg4oGJ77iPICBOb3QgY3JlYXRpbmcgcGF0Y2ggZmlsZSBmb3IgcGFja2FnZSAnJHtwYWNrYWdlTmFtZX0nYClcbiAgICAgIGNvbnNvbGUud2Fybihg4oGJ77iPICBUaGVyZSBkb24ndCBhcHBlYXIgdG8gYmUgYW55IGNoYW5nZXMuYClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGF0Y2hGaWxlTmFtZSA9IGAke3BhY2thZ2VOYW1lfToke3BhY2thZ2VWZXJzaW9ufS5wYXRjaGBcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKHBhdGNoZXNEaXIsIHBhdGNoRmlsZU5hbWUpLCBwYXRjaClcbiAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGVkIGZpbGUgcGF0Y2hlcy8ke3BhdGNoRmlsZU5hbWV9ICR7Z3JlZW4oXCLinJRcIil9YClcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKGUpXG4gICAgdGhyb3cgZVxuICB9IGZpbmFsbHkge1xuICAgIHRtcFJlcG8ucmVtb3ZlQ2FsbGJhY2soKVxuICAgIHJpbXJhZi5zeW5jKG5vZGVNb2R1bGVzUGF0aClcbiAgICBmcy5yZW5hbWVTeW5jKHBhdGguam9pbih0bXBOb2RlTW9kdWxlc0JhY2t1cC5uYW1lLCBcIm5vZGVfbW9kdWxlc1wiKSwgbm9kZU1vZHVsZXNQYXRoKVxuICAgIHRtcE5vZGVNb2R1bGVzQmFja3VwLnJlbW92ZUNhbGxiYWNrKClcbiAgfVxufVxuIl19